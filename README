winddb is a system to merge data from several types of weather stations
and export it to the web in common formats (JSON + XML).
It also maintains metadata for the monitored weather stations, such as their
geographic location and name.

winddb uses MySQL as its datasource. It relies on other systems to create, 
collect and manage weather data samples. winddb will merge the data using
MySQL views and export it to JSON/XML files on disk using the winddb python
script.

When new samples arrive, winddb can be used to re-generate any files related

Dependencies:
-------------
- Python (tested with v2.6)
- MySQL interface for python ("apt-get install python-mysqldb" on debian, 
  "yum install MySQL-python" on Fedora/Red Hat) 
- Python JSON ("apt-get install python-simplejson" on debian)

Installation:
-------------
**TODO**

Usage of exported data:
-----------------------
For easy access, it is recommended to output the generated files to a subdir of
your webroot. This allows for thirdparty applications (such as mobile apps) to
download them using a standard HTTP request.

For each station, winddb provides the most recent sample aswell as a log of the
n most recent samples. Typically, applications want to download the history file 
once during initialization (to populate graphs) and then append with new data 
as samples arrive. 

Since each station may use different samplerate, it is not recommended to use a
fixed rate for fetching the latest sample. To prevent unnecessary hammering, 
the recommended pollrate for each station is by the station index file.

In addition to the pollrate, the index file also contains GPS coordinates and
other miscellaneous station infos. The application should only have to download
this file once every session.

$ROOT				HTTP root, for example http://my.windsite.com/
$ROOT/index.json		Station index, JSON
$ROOT/index.jsonp		Station index, JSONP
$ROOT/index.xml			Station index, XML
$ROOT/$stationid/history.json	Last n samples (including latest), JSON
$ROOT/$stationid/history.xml	Last n samples (including latest), XML
$ROOT/$stationid/history.jsonp	Last n samples (including latest), JSONP
$ROOT/$stationid/latest.json	Lastest sample, JSON
$ROOT/$stationid/latest.jsonp	Lastest sample, JSONP
$ROOT/$stationid/latest.xml	Lastest sample, XML

$stationid can be found in the station index (index.{json,jsonp,xml}).

As the JSONP files are static, (javascript) clients must not be configured to
dynamically select callback name. A custom callback function name may be
specified as a command line parameter to winddb. Javascript should then declare
the same function to receive the padded JSON.

Guidelines for thirdparty applications:
---------------------------------------
* Do not hammer, use the pollrate for the given station. Estimate next update
by adding the pollrate to the latest sample date.

* Warn user about old samples. Do not assume lastest sample is NEW, check the
dates!

* Do not cache station info in between session. Stations may become disabled or
unavailable at any time.

* Individual samples are grouped into sample periods. A period has a first and
last sample-timestamp. When plotting average, max and min during a period, the
application should use the midpoint between these dates as its x-axis value.
E.g. midpoint = (first_sample + last_sample) / 2
